webpackJsonp([502],{r9Bk:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("4YfN"),i=s.n(o),a={data:function(){return{img:"",dec:"",show:!1,nonetworkimg:"",nonetworktext:"",door_id:"",iaaa_token:"",cademic:"",schoolLogo:"",schoolname:"",time:"",desc:"",base:{},qrcode:"",title:"",text:"二维码生成中...",qrcodeCtrl:!1,showinfo:!1,load:!0,err:!1,normal_sock:null,oQRCode:null,timer:null,rules:"",condition:{color:"",content:""},door:{id:"",name:"",remark:""},otherData:"",citys:"",relate_code:"1",show_code:"0",open_level:"0",direction:"0",code_text:"扫码成功",code_color:"green"}},created:function(){if(void 0==this.getUrlInfo().door_id)return this.show=!0,this.nonetworktext="页面不存在",void(this.nonetworkimg="/site/static/images/network.png");this.door_id=this.getUrlInfo().door_id,this.getUrlInfo().iaaa_token&&(this.iaaa_token=this.getUrlInfo().iaaa_token),this.img="/site/static/images/load.gif",this.dec="加载中",this.ajaxs()},methods:{getUrlInfo:function(){var e={};return(location.href.split("?")[1]?location.href.split("?")[1].split("&"):[]).map(function(t){e[t.split("=")[0]]=t.split("=")[1]}),e},getAgain:function(){this.qrcodeCtrl=!1,this.load=!0,this.err=!1,this.normal_sock.send("get_qrcode")},ajaxs:function(){var e=this;this.appFetch({method:"post",url:"healthcodemasterGetinfo",data:{door_id:this.door_id,iaaa_token:this.iaaa_token}},function(t){if(e.img="",e.dec="",0==t.e){if(""!=t.d.title?document.title=t.d.title:document.title="健康码",e.show_code=t.d.show_code,e.citys=t.d.city,e.showinfo=!0,e.show=!1,e.base=t.d.user,e.rules=t.d.rules,e.condition=t.d.condition,e.relate_code=t.d.relate_code,e.open_level=t.d.open_level,e.direction=t.d.direction,e.code_text=t.d.leavedata.message?t.d.leavedata.message:"扫码成功",e.code_color=t.d.leavedata.color?t.d.leavedata.color:"green",t.d.door&&(e.door=t.d.door),e.otherData=t.d.otherData,"green"==e.condition.color&&(e.desc="绿色码规则"),"red"==e.condition.color&&(e.desc="红色码规则"),"yellow"==e.condition.color&&(e.desc="黄色码规则"),e.time=t.d.time,1==e.show_code){var s=e;e.normal_sock=new normal_socket({debug:!1,security:"http"!=location.protocol.split(":")[0],url:appConfig.baseUrl.split("/")[2]+"/sock/user",open:function(){},loading:function(){s.img="/site/static/images/load.gif",s.dec="扫码中",null!=s.timer&&clearTimeout(s.timer)},close:function(){this.log("websocket已中断,请重新建立"),s.timer=setTimeout(function(){s.qrcodeCtrl=!1,s.err=!1,s.load=!0,console.log(33333),s.normal_sock.init()},1e3)},qrcode:function(e){if(null!=s.timer&&clearTimeout(s.timer),s.qrcodeCtrl=!0,s.load=!1,s.err=!1,null==s.oQRCode){if("green"==s.condition.color)var t="#34A853";else if("red"==s.condition.color)t="#EA4335";else t="#FBBC05";if(1==s.relate_code)var o={width:90,height:90,color:t};else o={width:172,height:172,color:t};s.oQRCode=new QRCode("qrcode",e.qrcode,o)}else s.oQRCode.clear(),s.oQRCode.makeCode(e.qrcode,"22222");e.expires_in&&(s.timer=setTimeout(function(){s.normal_sock.send("get_qrcode")},1e3*e.expires_in-1e3))},login:function(e){window.location.reload()},success:function(e){e=JSON.parse(e);s.normal_sock.send("get_qrcode"),"success"==e.action?(s.img="/site/static/images/successload.png",s.dec="扫码成功",setTimeout(function(){s.img="",s.dec=""},1500)):(s.img="/site/static/images/cha.png",s.dec=e.message,setTimeout(function(){s.img="",s.dec=""},1500))},error:function(e){s.qrcodeCtrl=!1,s.err=!0,s.load=!1}})}}else e.show=!0,e.nonetworktext=t.e+"</br>"+t.m,e.nonetworkimg="/site/static/images/xitongcuowu.png"},function(){e.img="",e.dec="",e.show=!0,e.nonetworktext="网络错误",e.nonetworkimg="/site/static/images/network1.png"},1),this.appFetch({method:"get",url:"getinfo",data:{}},function(t){0==t.e?(e.schoolLogo=t.d.site_logo,e.schoolname=t.d.school_name,Vue.nextTick(function(){var e=$(window).height();$(".center-qrcode").outerHeight(e)})):(e.show=!0,e.nonetworktext=t.e+"</br>"+t.m,e.nonetworkimg="/site/static/images/xitongcuowu.png")},function(){e.show=!0,e.nonetworktext="网络错误",e.nonetworkimg="/site/static/images/network1.png"},1)},getExamInfo:function(e){var t=this;this.appFetch({method:"get",url:"rssList",data:{}},function(e){t.img="",t.dec="",0==e.e?(t.show=!1,t.showCtrl=!0,t.list=e.d.list):(t.show=!0,t.nonetworktext=e.e+"</br>"+e.m,t.nonetworkimg="/site/static/images/xitongcuowu.png")},function(){t.showCtrl=!1,t.show=!0,t.img="",t.dec="",t.nonetworkimg="/site/static/images/network1.png",t.nonetworktext="网络错误"},e)},openCademic:function(){},ajax:function(){var e=this;this.appFetch({method:"get",url:"getinfo",data:{}},function(t){e.show=!1,e.img="",e.dec="",0==t.e?(console.log(2222,t.d),e.schoolLogo=t.d.backend_pic):(e.show=!0,e.nonetworktext=t.e+"</br>"+t.m,e.nonetworkimg="/site/static/images/xitongcuowu.png")},function(){e.show=!0,e.nonetworktext="网络错误",e.nonetworkimg="/site/static/images/network1.png",e.img="",e.dec=""},1)}},mounted:function(){}},r=s("6RUx"),n=s("UjTL"),c=s("fwLW"),d=i()({name:"masterqrcode",components:{gUserinfo:r.a,network:n.a,pophint:c.default}},a),l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"newQrcode"},[!e.show&&e.showinfo&&1==e.relate_code?s("div",[s("div",{staticClass:"epide_outer"},[s("div",{staticClass:"logo"},[s("div",[s("img",{attrs:{src:e.appConfig.imgUrl+e.schoolLogo,alt:""}})]),e._v(" "),s("span",[e._v(e._s(e.schoolname))])]),e._v(" "),s("div",{staticClass:"bjc"},[s("img",{attrs:{src:"/site/static/images/smlogin/mengceng2.png",alt:""}}),e._v(" "),s("div",{staticClass:"users"},[s("ul",[s("li",[s("span",[e._v("姓名")]),s("span",[e._v(e._s(e.base.realname))])]),e._v(" "),s("li",[s("span",[e._v("学工号")]),s("span",[e._v(e._s(e.base.role&&e.base.role.number))])])]),e._v(" "),s("ul",[s("li",{staticStyle:{width:"100%"}},[s("span",[e._v("单位")]),s("span",[e._v(e._s(e.base.departs))])])])])])]),e._v(" "),s("div",{staticClass:"content mastercontent"},[s("div",{staticClass:"location_tit"},[s("div",{staticClass:"qrcode-wrap master"},[s("div",{staticClass:"title-master"},[s("span",{staticClass:"fl"},[e._v("健康码")]),s("span",{staticClass:"fr"},[e._v("扫码时间："+e._s(e.time))])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.show_code,expression:"show_code==1"}],staticClass:"code_img qr-box qr-publice"},[s("div",{class:{border:!e.qrcodeCtrl}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.qrcodeCtrl,expression:"qrcodeCtrl"}],attrs:{id:"qrcode"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.load,expression:"load"}]},[e._v("二维码生成中...")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.err,expression:"err"}],on:{click:function(t){return e.getAgain()}}},[e._v("二维码生成失败，点击重新生成")])])]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:1==e.show_code,expression:"show_code==1"}],staticClass:"code_img_text"},[e._v(e._s(e.code_text))]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.show_code,expression:"show_code==0"}],staticClass:"nocode-wrap"},[1!=e.open_level&&"green"==e.code_color?s("img",{attrs:{src:"/site/static/images/qrcode/success.png",alt:""}}):e._e(),e._v(" "),"red"==e.code_color?s("img",{attrs:{src:"/site/static/images/qrcode/err.png",alt:""}}):e._e(),e._v(" "),"yellow"==e.code_color?s("img",{attrs:{src:"/site/static/images/qrcode/yellow.png",alt:""}}):e._e(),e._v(" "),"green"==e.code_color&&1==e.direction?s("img",{attrs:{src:"/site/static/images/qrcode/in.png",alt:""}}):e._e(),e._v(" "),"green"==e.code_color&&2==e.direction?s("img",{attrs:{src:"/site/static/images/qrcode/out.png",alt:""}}):e._e(),e._v(" "),s("p",{class:{green:"green"==e.code_color&&1==e.direction,red:"green"==e.code_color&&2==e.direction,reds:"red"==e.code_color,yellow:"yellow"==e.code_color}},[e._v(e._s(e.code_text))])])]),e._v(" "),e.door.name?s("div",{staticClass:"line"}):e._e(),e._v(" "),e.door.name?s("div",{staticClass:"szwz"},[s("div",{staticClass:"szwz-header"},[s("span",{staticClass:"fl"},[e._v("所在位置")]),e._v(" "),s("span",{staticClass:"fr"},[e._v(e._s(e.door.name))])]),e._v(" "),s("div",{staticClass:"szwz-foot"},[s("span",[e._v(e._s(e.door.remark))])])]):e._e(),e._v(" "),e.otherData?s("div",{staticClass:"line"}):e._e(),e._v(" "),e.otherData?s("div",{staticClass:"other-foot"},[s("span",{domProps:{innerHTML:e._s(e.otherData)}})]):e._e(),e._v(" "),s("div",{staticClass:"line"}),e._v(" "),s("div",{staticClass:"mastervia-city"},[s("em",[e._v("您14天内途经的城市：")]),s("span",[e._v(e._s(e.citys))])]),e._v(" "),s("div",{staticClass:"line"}),e._v(" "),s("div",{staticClass:"texts master"},["green"!=e.condition.color?s("div",{staticClass:"self-warp",class:{green:"green"==e.condition.color,red:"red"==e.condition.color,yellow:"yellow"==e.condition.color}},[s("span",[e._v("个人健康状况")]),s("span",{domProps:{innerHTML:e._s(e.condition.content)}})]):e._e(),e._v(" "),s("div",[s("i"),s("span",{staticClass:"black"},[e._v(e._s(e.desc))]),s("span",{domProps:{innerHTML:e._s(e.rules)}})])]),e._v(" "),"pku"==e.appConfig.id?s("div",{staticClass:"line"}):e._e(),e._v(" "),"pku"==e.appConfig.id?s("div",{staticClass:"jkb-wrap"},[e._m(0),e._v(" "),e._m(1)]):e._e(),e._v(" "),"pku"==e.appConfig.id?s("div",{staticClass:"line"}):e._e(),e._v(" "),"pku"==e.appConfig.id?s("div",{staticClass:"jkb-wrap"},[e._m(2),e._v(" "),e._m(3)]):e._e()])])]):e._e(),e._v(" "),!e.show&&e.showinfo&&1!=e.relate_code?s("div",[s("div",{staticClass:"epide_outer"},[s("div",{staticClass:"logo"},[s("div",[s("img",{attrs:{src:e.appConfig.imgUrl+e.schoolLogo,alt:""}})]),e._v(" "),s("span",[e._v(e._s(e.schoolname))])]),e._v(" "),s("div",{staticClass:"bjc"},[s("img",{attrs:{src:"/site/static/images/smlogin/mengceng2.png",alt:""}}),e._v(" "),s("div",{staticClass:"users"},[s("ul",[s("li",[s("span",[e._v("姓名")]),s("span",[e._v(e._s(e.base.realname))])]),e._v(" "),s("li",[s("span",[e._v("学工号")]),s("span",[e._v(e._s(e.base.role&&e.base.role.number))])])]),e._v(" "),s("ul",[s("li",{staticStyle:{width:"100%"}},[s("span",[e._v("单位")]),s("span",[e._v(e._s(e.base.departs))])])])])])]),e._v(" "),s("div",{staticClass:"content mastercontent"},[s("div",{staticClass:"location_tit"},["muc"==e.appConfig.id?s("img",{staticStyle:{width:"100%","border-radius":"0.1333333333rem 0.1333333333rem 0 0"},attrs:{src:"/site/static/images/qrcode/top.jpg"}}):e._e(),e._v(" "),s("div",{staticClass:"qrcode-wrap master"},[s("div",{staticClass:"title-master"},[s("span",{staticClass:"left"},[e._v("通行码")]),s("span",{staticClass:"right"},[s("em",[e._v("扫码时间："+e._s(e.time))])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.show_code,expression:"show_code==1"}],staticClass:"code_img qr-box qr-publice buaa_code_img"},[s("div",{class:{border:!e.qrcodeCtrl}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.qrcodeCtrl,expression:"qrcodeCtrl"}],attrs:{id:"qrcode"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.load,expression:"load"}]},[e._v("二维码生成中...")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.err,expression:"err"}],on:{click:function(t){return e.getAgain()}}},[e._v("二维码生成失败，点击重新生成")])])]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:1==e.show_code,expression:"show_code==1"}],staticClass:"code_img_text"},[e._v(e._s(e.code_text))]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.show_code,expression:"show_code==0"}],staticClass:"bignocode-wrap"},[1!=e.open_level&&"green"==e.code_color?s("img",{attrs:{src:"/site/static/images/qrcode/success.png",alt:""}}):e._e(),e._v(" "),"red"==e.code_color?s("img",{attrs:{src:"/site/static/images/qrcode/err.png",alt:""}}):e._e(),e._v(" "),"yellow"==e.code_color?s("img",{attrs:{src:"/site/static/images/qrcode/yellow.png",alt:""}}):e._e(),e._v(" "),"green"==e.code_color&&1==e.direction?s("img",{attrs:{src:"/site/static/images/qrcode/in.png",alt:""}}):e._e(),e._v(" "),"green"==e.code_color&&2==e.direction?s("img",{attrs:{src:"/site/static/images/qrcode/out.png",alt:""}}):e._e(),e._v(" "),s("p",{class:{green:"green"==e.code_color&&1==e.direction,red:"green"==e.code_color&&2==e.direction,reds:"red"==e.code_color,yellow:"yellow"==e.code_color}},[e._v(e._s(e.code_text))])])]),e._v(" "),e.door.name?s("div",{staticClass:"line"}):e._e(),e._v(" "),e.door.name?s("div",{staticClass:"buaaszwz"},[s("div",{staticClass:"szwz-header"},[s("span",{staticClass:"left"},[e._v("所在位置")]),e._v(" "),s("span",{staticClass:"right"},[e._v(e._s(e.door.name))])])]):e._e(),e._v(" "),e.door.remark?s("div",{staticClass:"line"}):e._e(),e._v(" "),e.door.remark?s("div",{staticClass:"other-foot"},[s("span",{domProps:{innerHTML:e._s(e.door.remark)}})]):e._e(),e._v(" "),e.otherData?s("div",{staticClass:"line"}):e._e(),e._v(" "),e.otherData?s("div",{staticClass:"other-foot"},[s("span",{domProps:{innerHTML:e._s(e.otherData)}})]):e._e(),e._v(" "),"pku"==e.appConfig.id?s("div",{staticClass:"line"}):e._e(),e._v(" "),"pku"==e.appConfig.id?s("div",{staticClass:"jkb-wrap"},[e._m(4),e._v(" "),e._m(5)]):e._e(),e._v(" "),"pku"==e.appConfig.id?s("div",{staticClass:"line"}):e._e(),e._v(" "),"pku"==e.appConfig.id?s("div",{staticClass:"jkb-wrap"},[e._m(6),e._v(" "),e._m(7)]):e._e()])])]):e._e(),e._v(" "),e.show?s("network",{attrs:{nonetworkimg:e.nonetworkimg,nonetworktext:e.nonetworktext}}):e._e(),e._v(" "),s("pophint",{attrs:{img:e.img,dec:e.dec,appkey:"healthcode"}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("img",{attrs:{src:"/site/static/images/qrcode/jkb.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fr"},[t("span",[this._v("北京健康宝")]),this._v(" "),t("span",[this._v("长按可以识别并打开健康宝")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("img",{attrs:{src:"/site/static/images/qrcode/face.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fr"},[t("span",[this._v("北大人脸采集")]),this._v(" "),t("span",[this._v("长按可以识别并打开人脸采集")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("img",{attrs:{src:"/site/static/images/qrcode/jkb.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fr"},[t("span",[this._v("北京健康宝")]),this._v(" "),t("span",[this._v("长按可以识别并打开健康宝")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("img",{attrs:{src:"/site/static/images/qrcode/face.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fr"},[t("span",[this._v("面部信息采集")]),this._v(" "),t("span",[this._v("长按可以识别并打开面部信息采集")])])}]},_=s("C7Lr")(d,l,!1,null,null,null);t.default=_.exports}});